---
layout: post
title: 21. JSON 파일 파싱
subtitle: JSON 파일 파싱
categories: study
tags: rprogramming
---

![r](/assets/img/logo/r-logo.png)

## Overview

R에서 JSON 파일을 파싱하여 R의 데이터 프레임으로 변경하는 방법을 알아본다.

> 예제 파일 : [jsonexfile.zip]({{"/assets/file/r/191017/jsonexfile.zip" | absolute_url}})  

*** 

## JSON

JSON(JavaScript Object Notation)은 *속성-값* 쌍(attribute–value pairs and array data types (or any other serializable value)) 또는 *키-값* 쌍으로 이루어진 데이터 오브젝트를 전달하기 위해 텍스트를 사용하는 개방형 표준 포맷이다.

주로 인터넷에서 자료를 주고 받을 때 그 자료를 표현하며, 자료의 종류에 큰 제한이 없고 프로그램의 변수 값을 표현하는데 적합하다.

JSON의 파일 확장자는 `.json`이다.

***

## JSON 파일의 구조

```
[
	{
		"name":"김철수",
		"occupation":"개발자",
		"information":
		    {
		    "address":"마포구 공덕동",
		    "info":
			{
			    "height":180, "weight":75, "blood":"O"
			}
		    }
	},
	{
		"name":"박영희",
		"occupation":"은행원",
		"information":
		    {
		    "address":"용산구 도원동",
		    "info":
			{
			    "height":165, "weight":48, "blood":"AB"
			}
		    }
	}
]
```

***

## JSON 파일을 R으로 가져오기

JSON 파일을 R으로 가져오기 위해 `jsonlite` 패키지를 사용하며, `fromJSON` 함수를 이용하여 파일을 *Dataframe* 형식으로 가져올 수 있다.

예제를 통해 JSON의 데이터를 가져오는 방법을 알아본다.

### 예제 1

```R
# install.packages('jsonlite')
library(jsonlite)

mJson <- 'R Basic Source/09.반정형/member.json'
mJson

# fromJSON 함수를 통해 JSON 파일 가져오기
mFrame <- fromJSON(mJson)
mFrame

summary(mFrame)
mode(mFrame)
class(mFrame)

# json 파일에서도 호출 가능 
mFrame$name

mFrame$name[2]

# 중첩된 데이터 정보는 dot(.)로 연결하여 컬럼 이름을 만들어준다.
write.csv(mFrame, 'before.csv')

tot_df <- data.frame()

for (idx in 1:nrow(mFrame)) {
  name <- mFrame$name[idx]
  occupation <- mFrame$occupation[idx]
  address <- mFrame$information$address[idx]
  height <- mFrame$information$info$height[idx]
  weight <- mFrame$information$info$weight[idx]
  blood <- mFrame$information$info$blood[idx]
  
  dFrame <- data.frame(name = name, occupation = occupation, address = address, height = height, weight = weight, blood = blood)
  tot_df <- rbind(tot_df, dFrame)
}
tot_df

write.csv(tot_df, 'after.csv')

chart1 <- unlist(tot_df$height)
barplot(chart1, ylim = c(0, 200))

```

### 예제 2

```R

```