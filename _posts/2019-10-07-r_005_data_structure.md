---
layout: post
title: 5. 자료 구조(Data Structure)
subtitle: 자료 구조(Data Structure)
categories: study
tags: rprogramming
---

![r](/assets/img/logo/r-logo.png)

## Overview

R에서 제공하는 ***자료 구조(Data structure)***는 메모리에 어떤 식으로 배정이 되고, 배정된 기억 공간에 자료가 어떻게 저장되어 있는가에 따라 분류된다.

자료 구조를 유형별로 살펴보고 해당 자료 구조를 만들 수 있는 함수와 자료를 처리해주는 함수를 통해 자료 구조의 특성을 알아본다.

***

## R에서 제공되는 주요 자료 구조

| 자료 형태 | 차원 | 자료 유형 | 복수 데이터 유형</br>적용 여부|
|:---------:|:---------:|:---------:|:---------:|
| Vector | 1차원 | 수치/문자/복소수/논리 | 불가 |
| Matrix | 2차원 | 수치/문자/복소수/논리 | 불가 |
| Data Frame | 2차원 | 수치/문자/복소수/논리 | 가능 |
| Array | 2차원 이상 | 수치/문자/복소수/논리 | 불가 |
| Factor | 1차원 | 수치/문자 | 불가 |
| Time Series | 2차원 | 수치/문자/복소수/논리 | 불가 |
| List | 2차원 이상 | 수치/문자/복소수/논리</br>함수/표현식/call등 | 가능 |

### 데이터의 개수 및 차원에 따른 분류

- 단일형 자료형 : 1종류의 데이터 타입을 저장할 수 있는 자료형
- 다중형 자료형 : 여러 타입의 데이터로 구성할 수 있는 자료형

| 구분 | 1차원 | 2차원 | 다차원 |
|:---------:|:---------:|:---------:|:---------:|
| 단일형 | Vector | Matrix(행렬) | Array(배열) |
| 다중형 | List | DataFrame | - |

***

## Vector

벡터는 타 프로그램에서 사용하는 배열의 개념과 동일하고, R에서 가장 기초가 되는 자료 구조이다.

한 가지의 데이터 타입(숫자, 문자열 등)만 저장할 수 있고 연속된 선형 구조의 형태로 만들어지며, *index*에 의해서 접근이 가능하다.

### 특징

- 1차원의 선형 자료 형태
- 자료는 `data_name[index]` 형태로 접근이 가능 (index는 1부터 시작)
- 동일한 타입의 자료 형태만 저장 가능
- 벡터의 생성 함수 : `c(), seq(), rep()`
- 벡터 자료 처리 함수 : `union(), setdiff(), intersect()`
- Slicing

### 벡터 관련 연산자

두 개의 벡터 `x`와 `y`간 산술 연산은 길이가 동일해야 한다.

| 연산자 | 설명 |
|:--------:|:---------|
| `+` | 벡터 요소간 더하기 연산 수행 |
| `*` | 벡터 요소간 곱하기 연산 수행 |
| `==` |벡터 요소간 비교 연산 수행 |
| `%*%` | 요소들간 곱셈을 연산하여 누적 합을 구함. 결과는 행렬 |
| `c(x, y)` | 벡터 x와 y의 요소를 합쳐 새로운 벡터 생성 |

***

## Matrix

R의 행렬은 수학 시간에 배운 행렬의 정의와 같이 행과 열의 수가 지정된 구조이다.
***행렬(Matrix)*** 자료 구조는 동일한 자료형을 갖는 2차원의 배열 구조를 갖는다.
따라서 모든 요소가 숫자인 행렬은 가능하지만, '1열은 숫자, 2열은 문자열'과 같은 형태는 불가능하다.

### 특징

- 행과 열의 2차원 배열 구조의 객체를 생성
- 동일한 타입의 데이터만 저장 가능
- 행렬 생성 함수 : `matrix(), cbind(), rbind()`
- 행렬 자료 처리 함수 : `apply()`

### matrix() 함수의 사용

> 사용형식 : `matrix(c(1:10), nrow = 2)`
 
| 매개변수 | 설명 |
|:--------:|:---------|
| `data` | 행렬을 생성할 데이터 벡터 |
| `nrow` | 행의 수 |
| `ncol` | 열의 수 |
| `byrow` | *TRUE*로 설정하면 행 우선으로 데이터가 채워짐</br>*FALSE* : 열우선|
| `dimnames` | 행렬의 각 차원에 부여할 이름을 설정</br>*list* 형식|

### col, row 병합 함수

`rbind()`와 `cbind()` 함수는 각각 행 또는 열 형태로 주어진 벡터, 행렬, 데이터 프레임을 합친 결과로 행렬 또는 데이터 프레임을 만드는 데 사용하는 함수

- rbind(...) : 지정한 데이터들을 row로 취급하여 병합
- cbind(...) : 지정한 데이터들을 col로 취급하여 병합

***

## apply 함수

R에는 벡터, 행렬, 데이터 프레임에 임의의 함수를 적용한 결과를 얻어 내기 위한 apply 계열 함수가 있다.
이 함수들은 데이터 전체(벡터, 행렬, 리스트, 데이터 프레임)에 대하여 함수를 적용시키는 벡터 연산을 수행하며 속도가 빠르다.

| 함수 | 설명 | 특징 |
|:---------:|:---------|:---------|
| `apply()` | 배열이나 행렬에 주어진 함수를 적용한 결과를 벡터, 배열 , 리스트로 반환 | 배열 또는 행렬에 적용 |
| `lapply()` |벡터, 리스트, 표현식에 함수를 적용한 결과를 리스트로 반환 | 결과가 리스트 |
| `sapply()` | `lapply()`와 유사하지만 결과를 벡터, 행렬, 배열로 반환 | 결과가 벡터, 배열, 행렬 |
| `tapply()` | 벡터에 있는 데이터를 특정 기준에 따라 그룹으로 묶고, 각그룹마다 주어진 함수를 적용한 결과를 반환 | 데이터를 그룹으로 묶어 함수를 적용 |
| `mapply()` | `sapply()` 함수의 확장</br>여러 개의 벡터, 리스트를 인자로 받아 함수에 각 데이터의 첫째, 둘째, 셋째 요소들을 각각 적용한 결과를 반환 | 여러 데이터를 함수의 인자로 적용 |

### apply()의 사용

> 사용 형식 : `apply( x, margin, fun)`

| 매개 변수 | 설명 |
|:---------:|:--------|
| x | 배열, 행렬 |
| margin | 함수를 적용하는 방향.</br>***1 : 행, 2 : 열*** |
| fun | 적용할 함수(sum, mean 등) |

